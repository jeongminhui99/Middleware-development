{"ast":null,"code":"import _slicedToArray from\"/Users/minhuijeong/Documents/Nodejs/OXGameServer/client_web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Component,useEffect,useState}from'react';import\"./App.css\";import socket from\"./socket\";import SelectUsername from\"./components/SelectUsername\";import Chat from\"./components/Chat\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function App(){var _this=this;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),usernameAlreadySelected=_useState4[0],setUsernameAlreadySelected=_useState4[1];React.useEffect(function(){return function(){console.log(\"UNMOUNT\");socket.off(\"connect_error\");};},[]);useEffect(function(){socket.on(\"connect_error\",function(err){if(err.message===\"invalid username\"){_this.usernameAlreadySelected=false;}});});var getData=function getData(username){setUsername(username);console.log(username);setUsernameAlreadySelected(true);socket.auth={username:username};socket.connect();};return/*#__PURE__*/_jsx(\"div\",{id:\"app\",children:!usernameAlreadySelected?/*#__PURE__*/_jsx(SelectUsername,{username:username,getData:getData}):/*#__PURE__*/_jsx(Chat,{})});}","map":{"version":3,"sources":["/Users/minhuijeong/Documents/Nodejs/OXGameServer/client_web/src/App.js"],"names":["React","Component","useEffect","useState","socket","SelectUsername","Chat","App","username","setUsername","usernameAlreadySelected","setUsernameAlreadySelected","console","log","off","on","err","message","getData","auth","connect"],"mappings":"iJAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,SAA3B,CAAsCC,QAAtC,KAAsD,OAAtD,CACA,MAAO,WAAP,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,cAAP,KAA2B,6BAA3B,CACA,MAAOC,CAAAA,IAAP,KAAiB,mBAAjB,C,2CAEA,cAAe,SAASC,CAAAA,GAAT,EAAe,gBAC1B,cAAgCJ,QAAQ,CAAC,EAAD,CAAxC,wCAAOK,QAAP,eAAiBC,WAAjB,eACA,eAA8DN,QAAQ,CAAC,KAAD,CAAtE,yCAAOO,uBAAP,eAAgCC,0BAAhC,eAEAX,KAAK,CAACE,SAAN,CAAgB,UAAM,CAClB,MAAO,WAAM,CACTU,OAAO,CAACC,GAAR,CAAY,SAAZ,EACAT,MAAM,CAACU,GAAP,CAAW,eAAX,EACH,CAHD,CAIH,CALD,CAKG,EALH,EAOAZ,SAAS,CAAC,UAAI,CAEVE,MAAM,CAACW,EAAP,CAAU,eAAV,CAA2B,SAACC,GAAD,CAAS,CAChC,GAAIA,GAAG,CAACC,OAAJ,GAAgB,kBAApB,CAAwC,CACxC,KAAI,CAACP,uBAAL,CAA+B,KAA/B,CACC,CACJ,CAJD,EAKH,CAPQ,CAAT,CASA,GAAMQ,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACV,QAAD,CAAc,CAC1BC,WAAW,CAACD,QAAD,CAAX,CACAI,OAAO,CAACC,GAAR,CAAYL,QAAZ,EACAG,0BAA0B,CAAC,IAAD,CAA1B,CACAP,MAAM,CAACe,IAAP,CAAc,CAAEX,QAAQ,CAARA,QAAF,CAAd,CACAJ,MAAM,CAACgB,OAAP,GACH,CAND,CAQA,mBACI,YAAK,EAAE,CAAC,KAAR,UACK,CAACV,uBAAD,cAA0B,KAAC,cAAD,EAAgB,QAAQ,CAAEF,QAA1B,CAAoC,OAAO,CAAEU,OAA7C,EAA1B,cAAoF,KAAC,IAAD,IADzF,EADJ,CAKH","sourcesContent":["import React, { Component, useEffect, useState } from 'react';\nimport \"./App.css\";\nimport socket from \"./socket\";\nimport SelectUsername from \"./components/SelectUsername\";\nimport Chat from \"./components/Chat\";\n\nexport default function App() {\n    const [username, setUsername] = useState('');\n    const [usernameAlreadySelected, setUsernameAlreadySelected] = useState(false);\n\n    React.useEffect(() => {\n        return () => {\n            console.log(\"UNMOUNT\")\n            socket.off(\"connect_error\");\n        }\n    }, []);\n\n    useEffect(()=>{\n\n        socket.on(\"connect_error\", (err) => {\n            if (err.message === \"invalid username\") {\n            this.usernameAlreadySelected = false;\n            }\n        });\n    })\n\n    const getData = (username) => {\n        setUsername(username);\n        console.log(username);\n        setUsernameAlreadySelected(true);\n        socket.auth = { username };\n        socket.connect();\n    }\n\n    return(\n        <div id=\"app\">\n            {!usernameAlreadySelected? <SelectUsername username={username} getData={getData}/> : <Chat/>}\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}