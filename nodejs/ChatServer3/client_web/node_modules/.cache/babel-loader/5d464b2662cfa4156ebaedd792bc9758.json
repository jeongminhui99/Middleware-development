{"ast":null,"code":"import _slicedToArray from\"/Users/minhuijeong/Documents/Nodejs/OXGameServer/client_web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Component,useEffect,useState}from'react';import StatusIcon from\"./StatusIcon\";import\"./MessagePanel.scoped.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MessagePanel=function MessagePanel(_ref){var user=_ref.user,onMessage=_ref.onMessage;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),finalmsg=_useState4[0],setFinalmsg=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isValid=_useState6[0],setisValid=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),msg=_useState8[0],isMsg=_useState8[1];useEffect(function(){console.log(\"msgpanel \",user.messages);},[user.messages]);var onSubmit=function onSubmit(event){event.preventDefault();//console.log(\"msg : \", finalmsg);\nonMessage(finalmsg);setInput(\"\");setFinalmsg(\"\");};var displaySender=function displaySender(message,index){return index===0||user.messages[index-1].fromSelf!==user.messages[index].fromSelf;};var isvalid=function isvalid(msg){setFinalmsg(msg);return msg.length>0;};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(StatusIcon,{connected:user.connected}),\" \",user.username]}),/*#__PURE__*/_jsx(\"ul\",{className:\"messages\",children:user.messages.map(function(message,index){return/*#__PURE__*/_jsxs(\"li\",{className:\"message\",children:[displaySender(message,index)?/*#__PURE__*/_jsx(\"div\",{className:\"sender\",children:message.fromSelf?\"(yourself)\":user.username}):null,message.content]});})}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Your message...\",onChange:function onChange(e){return setisValid(isvalid(e.target.value));},className:\"input\",value:finalmsg}),/*#__PURE__*/_jsx(\"button\",{disabled:!isValid,className:\"send-button\",children:\"Send\"})]})]});};export default MessagePanel;","map":{"version":3,"sources":["/Users/minhuijeong/Documents/Nodejs/OXGameServer/client_web/src/components/MessagePanel.js"],"names":["React","Component","useEffect","useState","StatusIcon","MessagePanel","user","onMessage","input","setInput","finalmsg","setFinalmsg","isValid","setisValid","msg","isMsg","console","log","messages","onSubmit","event","preventDefault","displaySender","message","index","fromSelf","isvalid","length","connected","username","map","content","e","target","value"],"mappings":"iJAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,SAA3B,CAAsCC,QAAtC,KAAsD,OAAtD,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAO,2BAAP,C,wFAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAyB,IAAtBC,CAAAA,IAAsB,MAAtBA,IAAsB,CAAhBC,SAAgB,MAAhBA,SAAgB,CAE1C,cAA0BJ,QAAQ,CAAC,EAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eACA,eAAgCN,QAAQ,CAAC,EAAD,CAAxC,yCAAOO,QAAP,eAAiBC,WAAjB,eACA,eAA8BR,QAAQ,CAAC,KAAD,CAAtC,yCAAOS,OAAP,eAAgBC,UAAhB,eACA,eAAqBV,QAAQ,CAAC,EAAD,CAA7B,yCAAOW,GAAP,eAAYC,KAAZ,eAEAb,SAAS,CAAC,UAAI,CACVc,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAyBX,IAAI,CAACY,QAA9B,EACH,CAFQ,CAEN,CAACZ,IAAI,CAACY,QAAN,CAFM,CAAT,CAIA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,CAAW,CACxBA,KAAK,CAACC,cAAN,GACA;AACAd,SAAS,CAACG,QAAD,CAAT,CACAD,QAAQ,CAAC,EAAD,CAAR,CACAE,WAAW,CAAC,EAAD,CAAX,CACH,CAND,CAQA,GAAMW,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,OAAD,CAAUC,KAAV,CAAoB,CACtC,MACIA,CAAAA,KAAK,GAAK,CAAV,EACAlB,IAAI,CAACY,QAAL,CAAcM,KAAK,CAAG,CAAtB,EAAyBC,QAAzB,GACAnB,IAAI,CAACY,QAAL,CAAcM,KAAd,EAAqBC,QAHzB,CAKH,CAND,CAQA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACZ,GAAD,CAAS,CACrBH,WAAW,CAACG,GAAD,CAAX,CACA,MAAOA,CAAAA,GAAG,CAACa,MAAJ,CAAa,CAApB,CACH,CAHD,CAKA,mBACI,oCACI,aAAK,SAAS,CAAC,QAAf,wBACI,KAAC,UAAD,EAAY,SAAS,CAAErB,IAAI,CAACsB,SAA5B,EADJ,KAC+CtB,IAAI,CAACuB,QADpD,GADJ,cAII,WAAI,SAAS,CAAC,UAAd,UAEQvB,IAAI,CAACY,QAAL,CAAcY,GAAd,CAAkB,SAACP,OAAD,CAAUC,KAAV,qBACd,YAAI,SAAS,CAAC,SAAd,WACKF,aAAa,CAACC,OAAD,CAAUC,KAAV,CAAb,cACG,YAAK,SAAS,CAAC,QAAf,UACMD,OAAO,CAACE,QAAR,CAAmB,YAAnB,CAAkCnB,IAAI,CAACuB,QAD7C,EADH,CAKG,IANR,CAQKN,OAAO,CAACQ,OARb,GADc,EAAlB,CAFR,EAJJ,cAoBI,cAAM,SAAS,CAAC,MAAhB,CAAuB,QAAQ,CAAEZ,QAAjC,wBACI,iBAAU,WAAW,CAAC,iBAAtB,CAAwC,QAAQ,CAAE,kBAAAa,CAAC,QAAInB,CAAAA,UAAU,CAACa,OAAO,CAACM,CAAC,CAACC,MAAF,CAASC,KAAV,CAAR,CAAd,EAAnD,CAA4F,SAAS,CAAC,OAAtG,CAA8G,KAAK,CAAExB,QAArH,EADJ,cAEI,eAAQ,QAAQ,CAAE,CAACE,OAAnB,CAA4B,SAAS,CAAC,aAAtC,kBAFJ,GApBJ,GADJ,CA2BH,CA3DD,CA4DA,cAAeP,CAAAA,YAAf","sourcesContent":["import React, { Component, useEffect, useState } from 'react';\nimport StatusIcon from \"./StatusIcon\";\nimport \"./MessagePanel.scoped.css\";\n\nconst MessagePanel = ({ user, onMessage }) => {\n\n    const [input, setInput] = useState(\"\");\n    const [finalmsg, setFinalmsg] = useState(\"\");\n    const [isValid, setisValid] = useState(false); \n    const [msg, isMsg] = useState(\"\");\n\n    useEffect(()=>{\n        console.log(\"msgpanel \", user.messages);\n    }, [user.messages]);\n\n    const onSubmit = (event) => {\n        event.preventDefault();\n        //console.log(\"msg : \", finalmsg);\n        onMessage(finalmsg);\n        setInput(\"\");\n        setFinalmsg(\"\");\n    }\n\n    const displaySender = (message, index) => {\n        return(\n            index === 0 ||\n            user.messages[index - 1].fromSelf !== \n            user.messages[index].fromSelf\n        );\n    }\n\n    const isvalid = (msg) => {\n        setFinalmsg(msg);\n        return msg.length > 0;\n    }\n\n    return(\n        <div>\n            <div className=\"header\">\n                <StatusIcon connected={user.connected}/> { user.username }\n            </div>        \n            <ul className=\"messages\">\n                {\n                    user.messages.map((message, index) => (\n                        <li className=\"message\">\n                            {displaySender(message, index)? \n                                <div className=\"sender\">\n                                    { message.fromSelf ? \"(yourself)\" : user.username }\n                                </div>\n                                :\n                                null\n                            }\n                            {message.content}\n                        </li>\n                    ))\n                }\n            </ul>\n            <form className=\"form\" onSubmit={onSubmit}>\n                <textarea placeholder=\"Your message...\" onChange={e => setisValid(isvalid(e.target.value))} className=\"input\" value={finalmsg}/>\n                <button disabled={!isValid} className=\"send-button\">Send</button>\n            </form>\n        </div>\n    );\n}\nexport default MessagePanel;"]},"metadata":{},"sourceType":"module"}